/*
 * command_parser_fsm.c
 *
 *  Created on: Nov 10, 2025
 *      Author: ASUS
 */

#ifndef SRC_COMMAND_PARSER_FSM_C_
#define SRC_COMMAND_PARSER_FSM_C_

#include "command_parser_fsm.h"
#include "main.h"
#include <string.h>
#include <stdint.h>

extern volatile uint8_t frame_ready;
extern uint8_t buffer[];
extern uint8_t buffer_index;

uint8_t command_flag = 0;   // 1=RST, 2=OK
uint32_t adcValue = 0;

void command_parser_fsm(void){
  if (!frame_ready) return;

  if (strcmp((char*)buffer, "!RST#") == 0){
    command_flag = 1;
  }
  else if (strcmp((char*)buffer, "!OK#") == 0){
    command_flag = 2;
  }

  frame_ready = 0;
  buffer_index = 0;
}


#endif /* SRC_COMMAND_PARSER_FSM_C_ */
